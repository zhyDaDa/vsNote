---
title: L13_可变数组与链表___2023-02-14
date: 2023-02-14T22:18:53+08:00
tags:
    - C语言学习笔记
    - study
---

目录

- [可变数组](#可变数组)

- - -

## 可变数组
### 思路  
C语言中, 数组被一旦定义就**无法改变其大小**  
如果想得到一个"可变数组", 应当有一下特点:  
 + 可以增长  
 + 要能知道当前数组确切的大小  
 + 要有方便合理的方法访问到其中的单元  

考虑创建一系列实现特定功能的函数库:  
 + 创建这样的数组: `Array array_create(int init_size);`
 + 释放数组: `void array_free(Array *a);`
 + 获得数组大小: `int array_size(const Array *a);`
 + 获得指定单元的地址: `int* array_at(Array *a, int index);`
 + 扩大数组的空间: `void array_inflate(Array *a, int more_size);`

### 实现  
#### 定义结构  
```
typedef struct {
    int *array;
    int size;
} Array;
```
> 其实, 可以直接定义`*Array`指针, 原因是函数调用基本都要求传指针, 直接定义为指针会显得方便美观  
> 但是, ta有两个严重的弊端   
> 首先, 阅读代码的人, 很难察觉这是一个指针   
> 其次, 无法在局部范围内, 定义出一个`Array`  
>
> 因此, 还是老老实实的定义本体

#### 创建数组 
```
Array array_create(int init_size)
{
    Array a;
    a.size = init_size;
    a.array = (int *)malloc(sizeof(int) * a.size);
    return a;
}
```
#### 释放数组
```
void array_free(Array *a){
    free(a->array);
    a->array = NULL;
    a->size = 0;
}
```
> 后面两行是出于保险起见